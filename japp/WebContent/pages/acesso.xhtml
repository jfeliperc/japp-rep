<ui:composition template="../templates/t_base.xhtml"
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">
	
    <ui:define name="conteudo">
    	<h:form id="frmPessoa">
	    	<p:panel header="Configuração de acesso" style="width:100%; height: 95%; " rendered="#{!acessoMb.mostrarLista}">
	    		<table><tr><td width="1300px">
		      	<div style="padding-left: 10px">
		      		
		      		<nav class="navbar navbar-default" style="min-height: 30px !important;">
		  				<div class="container-fluid">		    
		      				<span class="btn-group navbar-left">
					      		<h:panelGroup id="botoesPanel" layout="block">		      				      			
				      				<table><tr><td width="20px">
				      				<h:commandLink action="#{acessoMb.limpar()}" value="" ><h:graphicImage value="/css/img/limpar.png" width="20px" height="20px" /></h:commandLink>
				      				</td><td width="20px">
				      				<h:commandLink action="#{acessoMb.buscar()}" value="" ><h:graphicImage value="/css/img/buscar.png" width="20px" height="20px" /></h:commandLink>
				      				</td><td width="20px">
				      				<h:commandLink action="#{acessoMb.salvar()}" value="" ><h:graphicImage value="/css/img/salvar.png" width="20px" height="20px" /></h:commandLink>
				      				</td></tr></table>		      				
					      		</h:panelGroup>
				      		</span>
				      		
				      		<span class="btn-group navbar-right">
				      			<span class="btn-group">
									<h:commandLink styleClass="btn btn-link" action="#{acessoMb.alternaMostraLista()}" value="Ver Lista" />
								</span>
				      		</span>
				      	</div>
				    </nav>	
				    
			      	<h:panelGroup id="messagePanel" layout="block">
	                	<h:messages errorStyle="color: red" infoStyle="color: green" layout="table"/>
	                	<hr/>
		            </h:panelGroup>
			      	<h:panelGrid columns="4" styleClass="gridForm" >
	                    
	                    <h:outputLabel value="Id" for="id" />
	                    <h:inputText id="id" value="#{acessoMb.pessoa.id}" title="id" disabled="#{acessoMb.pessoa.id != null}"/>	                    
	                    <h:panelGroup></h:panelGroup>
	                    <h:panelGroup></h:panelGroup>
	                    
	                    <h:outputLabel value="Nome" for="nome" />
	                    <h:inputText id="nome" value="#{acessoMb.pessoa.nome}" title="nome" size="50" disabled="#{acessoMb.pessoa.nome != null}"/>
	                    
	                    <h:outputLabel value="Nome Completo" for="nomecompleto" />
	                    <h:inputText id="nomecompleto" value="#{acessoMb.pessoa.nomecompleto}" title="nomecompleto}" size="60" />
	                    
	                    <h:outputLabel value="Data Nascimento" for="datanascimento" />
	                    <h:inputText id="datanascimento" value="#{acessoMb.pessoa.datanascimento}" title="datanascimento" >
	                        <f:convertDateTime pattern="dd/MM/yyyy" />
	                    </h:inputText>
	                    
	                    <h:outputLabel value="CPF" for="cpf" />
	                    <h:inputText id="cpf" value="#{acessoMb.pessoa.cpf}" title="cpf}" />
	                    	                    
	                    <h:outputLabel value="login" for="login" />
	                    <h:inputText id="login" value="#{acessoMb.pessoa.login}" title="login}" />
	                    
	                    <h:outputLabel value="Senha" for="pass" />
	                    <h:inputText id="pass" value="#{acessoMb.pessoa.pass}" title="pass}" />
	                    
	                    <h:outputLabel value="Validade Login" for="validadeLogin" />
	                    <h:outputLabel id="validadeLogin" value="#{acessoMb.pessoa.validadeLogin}" title="validadeLogin" >
	                        <f:convertDateTime pattern="dd/MM/yyyy" />
	                    </h:outputLabel>
	                    
	                    <h:outputLabel value="Tipo Usuário" for="tipoUsuario" />
	                    <h:inputText id="tipoUsuario" value="#{acessoMb.pessoa.tipoUsuario}" title="tipoUsuario" required="false"/>
	                    
	                    <h:outputLabel value="Data Último Acesso" for="dataultimoacesso" />
	                    <h:outputLabel id="dataultimoacesso" value="#{acessoMb.pessoa.dataultimoacesso}" title="dataultimoacesso" >
	                        <f:convertDateTime pattern="dd/MM/yyyy" />
	                    </h:outputLabel>
	                    
	                    <h:outputLabel value="Empresa" for="empresaId" />
	                    <h:inputText id="empresaId" value="#{acessoMb.pessoa.empresa.nomeFantasia}" title="empresa" disabled="true"/>
	                    
	                    <h:outputLabel value="Email" for="email" />
	                    <h:inputText id="email" value="#{acessoMb.pessoa.email}" title="Email" size="60"/>
	                    
	                </h:panelGrid>
	                <br/><br/>				    
				</div>	
				
				<p:panel header="Módulos" style="width:100%; height: 95%; ">					
					<br/>
					<p:dataTable value="#{acessoMb.modulos}" var="us" style="width:100%" id="tbModulo">
		    			<p:column width="50%">
		    				<f:facet name="header">Módulo</f:facet>
		    				<h:outputText value="#{us.rotina1.rotina}" />
		    			</p:column>
		    			<p:column>
		    				<f:facet name="header">Permissão</f:facet>
		    				<h:outputText value="#{us.status}" />
		    			</p:column>
		    			<p:column>
		    				<f:facet name="header">Ação</f:facet>
		    				<center>
		    					<table><tr><td width="30px">
		    						<h:commandLink action="#{acessoMb.detalharModulo(us)}" value="" title="Detalhar"><h:graphicImage value="/css/img/edit.png" width="20px" height="20px" /></h:commandLink>
		    					</td><td width="30px">
		    						<h:commandLink action="#{acessoMb.liberarModulo(us)}" value="" title="Liberar acesso"><h:graphicImage value="/css/img/cadOpen.png" width="20px" height="20px" /></h:commandLink>
		    					</td><td width="30px">
		    						<h:commandLink action="#{acessoMb.bloquearModulo(us)}" value="" title="Bloquear acesso"><h:graphicImage value="/css/img/cadClose.png" width="20px" height="20px" /></h:commandLink>
		    					</td></tr></table>		    				
		    				</center>
		    			</p:column>
		    		</p:dataTable>	
				</p:panel>
				
				<p:panel header="Rotinas" style="width:100%; height: 95%; ">					
					<br/>
					<p:dataTable value="#{acessoMb.acessos}" var="us" style="width:100%" id="tbRotina">
		    			<p:column width="70%">
		    				<f:facet name="header">Rotina</f:facet>
		    				<h:outputText value="#{us.rotina2.rotina}" />
		    			</p:column>
		    			<p:column>
		    				<f:facet name="header">Permissão</f:facet>
		    				<h:outputText value="#{us.status}" />
		    			</p:column>
		    			<p:column>
		    				<f:facet name="header">Ação</f:facet>
		    				<center>
		    					<table><tr><td width="30px">
		    						<h:commandLink action="#{acessoMb.liberarAcesso(us)}" value="" title="Liberar acesso"><h:graphicImage value="/css/img/cadOpen.png" width="20px" height="20px" /></h:commandLink>
		    					</td><td width="30px">
		    						<h:commandLink action="#{acessoMb.bloquearAcesso(us)}" value="" title="Bloquear acesso"><h:graphicImage value="/css/img/cadClose.png" width="20px" height="20px" /></h:commandLink>
		    					</td></tr></table>			    				
		    				</center>
		    			</p:column>		    			
		    		</p:dataTable>	
				</p:panel>
				
				</td></tr></table>	
		    </p:panel>
		    
		    <p:panel header="Lista de pessoas" style="width:100%; height: 95%; " rendered="#{acessoMb.mostrarLista}">
		    	<table><tr><td width="1300px">
		    	<div style="padding-left: 10px">
			      	<nav class="navbar navbar-default" style="min-height: 30px !important;">
		  				<div class="container-fluid">
				      		<span class="btn-group navbar-right">
				      			<span class="btn-group">
									<h:commandLink styleClass="btn btn-link" action="#{acessoMb.alternaMostraLista()}" value="Ver detalhe" />
								</span>				      			
				      		</span>
				      	</div>
				    </nav>	
				</div> 
		    	<p:dataTable value="#{acessoMb.pessoas}" var="us" style="width:100%" id="tbPessoas">
		    			<p:column>
		    				<f:facet name="header">Nome</f:facet>
		    				<h:outputText value="#{us.nome}" />
		    			</p:column>
		    			<p:column>
		    				<f:facet name="header">CPF</f:facet>
		    				<h:outputText value="#{us.cpf}" />
		    			</p:column>
		    			<p:column>
		    				<f:facet name="header">Login</f:facet>
		    				<h:outputText value="#{us.login}" />
		    			</p:column>
		    			<p:column>
		    				<f:facet name="header">Email</f:facet>
		    				<h:outputText value="#{us.email}" />
		    			</p:column>
		    			<p:column>
		    				<f:facet name="header">Ação</f:facet>
		    				<center><h:commandLink action="#{acessoMb.editarPessoa(us)}" value="" title="Editar dados deste registro"><h:graphicImage value="/css/img/edit.png" width="20px" height="20px" /></h:commandLink></center>
		    			</p:column>
		    	</p:dataTable>
		    	</td></tr></table>
		    </p:panel>
   
	    	
		</h:form>
    </ui:define>
    
    
</ui:composition>