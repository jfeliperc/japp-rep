<ui:composition template="../templates/t_base.xhtml"
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">
	
    <ui:define name="conteudo">
    	<h:form id="frmPessoa">
    	   	
	    	<p:panel header="Cadastro de pessoas" style="width:100%; height: 95%; " rendered="#{!pessoaMb.mostrarLista}">
	    		<table><tr><td width="90%">
		      	
		      	<div style="padding-left: 10px">
		      				      		
		      		<nav class="navbar navbar-default" style="min-height: 30px !important;">
		  				<div class="container-fluid">		    
		      				<span class="btn-group navbar-left">
					      		<h:panelGroup id="botoesPanel" layout="block">		      				      			
				      				<table><tr><td width="20px">
				      				<h:commandLink action="#{pessoaMb.limpar()}" value="" ><h:graphicImage value="/css/img/limpar.png" width="20px" height="20px" /></h:commandLink>
				      				</td><td width="20px">
				      				<h:commandLink action="#{pessoaMb.buscar()}" value="" ><h:graphicImage value="/css/img/buscar.png" width="20px" height="20px" /></h:commandLink>
				      				</td><td width="20px">
				      				<h:commandLink action="#{pessoaMb.salvar()}" value="" ><h:graphicImage value="/css/img/salvar.png" width="20px" height="20px" /></h:commandLink>
				      				</td><td width="20px">
				      				<h:commandLink action="#{pessoaMb.excluir()}" value="" ><h:graphicImage value="/css/img/excluir.png" width="20px" height="20px" /></h:commandLink>
				      				</td></tr></table>		      				
					      		</h:panelGroup>
				      		</span>
				      		
				      		<span class="btn-group navbar-right">
				      			<span class="btn-group">
									<h:commandLink styleClass="btn btn-link" action="#{pessoaMb.alternaMostraLista()}" value="Ver Lista" />
								</span>
				      		</span>
				      	</div>
				    </nav>	
		      				      		
			      	<h:panelGroup id="messagePanel" layout="block">
	                	<h:messages errorStyle="color: red" infoStyle="color: green" layout="table"/>
	                	<hr/>
		            </h:panelGroup>
			      				      	
			      	<h:panelGrid columns="4" styleClass="gridForm">
	                    <h:outputLabel value="Id" for="id" />
	                    <h:inputText id="id" value="#{pessoaMb.pessoa.id}" title="id" required="false"/>
	                    <h:panelGroup></h:panelGroup>
	                    <h:panelGroup></h:panelGroup>
	                    	                    
	                    <h:outputLabel value="Nome" for="nome" />
	                    <h:inputText id="nome" value="#{pessoaMb.pessoa.nome}" title="nome" size="40"/>
	                    
	                    <h:outputLabel value="Nome Completo" for="nomecompleto" />
	                    <h:inputText id="nomecompleto" value="#{pessoaMb.pessoa.nomecompleto}" title="nome completo" size="50" />
	                    
	                    <h:outputLabel value="Data Nascimento" for="datanascimento" />
	                    <h:inputText id="datanascimento" value="#{pessoaMb.pessoa.datanascimento}" title="data nascimento" 
	                    		onkeypress="mask(this,'99/99/9999',1,this)">
	                        <f:convertDateTime pattern="dd/MM/yyyy" />
	                    </h:inputText>
	                    
	                    <h:outputLabel value="CPF" for="cpf" />
	                    <h:inputText id="cpf" value="#{pessoaMb.pessoa.cpf}" title="cpf}" onkeypress="mask(this,'999.999.999-99',1,this)" />
	                    
	                    <h:outputLabel value="Documento" for="documento" />
	                    <h:inputText id="documento" value="#{pessoaMb.pessoa.documento}" title="documento}" />
	                    
	                    <h:outputLabel value="Tipo Documento" for="tipodocumento" />
	                    <h:inputText id="tipodocumento" value="#{pessoaMb.pessoa.tipodocumento}" title="tipo documento" />
	                    
	                    <h:outputLabel value="Tipo Pessoa" for="tipoPessoa" />
	                    <h:selectOneMenu value="#{pessoaMb.pessoa.tipoPessoa}" style="width:150px" id="tipoPessoa">
							<f:selectItem itemLabel="Pessoa Física" itemValue="PF"/>
							<f:selectItem itemLabel="Pessoa Jurídica" itemValue="PJ"/>
						</h:selectOneMenu>
	                    
	                    <h:outputLabel value="Email" for="email" />
	                    <h:inputText id="email" value="#{pessoaMb.pessoa.email}" title="Nome" size="50"/>
	                    
	                    <h:outputLabel value="login" for="login" />
	                    <h:inputText id="login" value="#{pessoaMb.pessoa.login}" title="login" />
	                    <h:panelGroup></h:panelGroup>
	                    <h:panelGroup></h:panelGroup>
	                    
	                    <h:outputLabel value="Senha" for="pass" />
	                    <h:panelGroup>
		                    <h:selectBooleanCheckbox value="#{pessoaMb.renovarSenha}" title="Renovar senha no próximo login" 
		                    	label="Renovar senha no próximo login" layout="lineDirection" id="pass"/>
		                    <h:outputLabel value="Renovar senha no próximo login" />
	                    </h:panelGroup>
	                    <h:panelGroup></h:panelGroup>
	                    <h:panelGroup></h:panelGroup>
	                    	                    
	                    <h:outputLabel value="Status" for="ativo" />
	                    <h:selectOneMenu value="#{pessoaMb.pessoa.tipo}" style="width:150px" id="ativo">
							<f:selectItem itemLabel="Ativo" itemValue="1"/>
							<f:selectItem itemLabel="Inativo" itemValue="0"/>
						</h:selectOneMenu>
	                    	                    
	                    <h:outputLabel value="Empresa" for="empresaId" />
	                    <h:selectOneMenu id="empresaId" value="#{pessoaMb.empresaAux.id}" title="Selecione a empresa vinculada" style="width:250px" converter="genConverter">
	                        <f:selectItem itemValue="#{null}" itemLabel=""/>
	                        <f:selectItems value="#{pessoaMb.empresas}" var="emp" itemValue="#{emp.id}" itemLabel="#{emp.nomeFantasia}"/>
	                    </h:selectOneMenu>
	                    
	                    <h:outputLabel value="Validade Login" for="validadeLogin" />
	                    <h:outputLabel id="validadeLogin" value="#{pessoaMb.pessoa.validadeLogin}" title="Validade Login" >
	                        <f:convertDateTime pattern="dd/MM/yyyy" />
	                    </h:outputLabel>
	                     
	                    <h:outputLabel value="Data Último Acesso" for="dataultimoacesso" />
	                    <h:outputLabel id="dataultimoacesso" value="#{pessoaMb.pessoa.dataultimoacesso}" title="Data Último Acesso}" >
	                        <f:convertDateTime pattern="dd/MM/yyyy" />
	                    </h:outputLabel>
	                    
	                    <h:outputLabel value="Data Inclusão" for="datainclusao" />
	                    <h:outputLabel id="datainclusao" value="#{pessoaMb.pessoa.datainclusao}" title="Data Inclusao" >
	                        <f:convertDateTime pattern="dd/MM/yyyy" />
	                    </h:outputLabel>
	                    
	                    <h:outputLabel value="Data Alteração" for="dataalteracao" />
	                    <h:outputLabel id="dataalteracao" value="#{pessoaMb.pessoa.dataalteracao}" title="Data Alteracao" >
	                        <f:convertDateTime pattern="dd/MM/yyyy" />
	                    </h:outputLabel>
	                    
	                </h:panelGrid>
	                <br/><br/>				    
				</div>	
				
				<p:panel header="Contatos" style="width:100%; height: 95%; ">
					<h:panelGrid columns="2" styleClass="gridForm" cellspacing="0px" cellpadding="0" style="border:none; padding: 0px 0px;">
						
						<h:panelGroup>
		                	<h:commandLink action="#{pessoaMb.limparContatos()}" value="" ><h:graphicImage value="/css/img/limpar.png" width="20px" height="20px" /></h:commandLink>
		                	<h:commandLink action="#{pessoaMb.salvarContatos()}" value="" ><h:graphicImage value="/css/img/salvar.png" width="20px" height="20px" /></h:commandLink>
		                </h:panelGroup>		                
	                    <h:panelGroup></h:panelGroup>
						
						<h:outputLabel value="Tipo" for="tipoC" />
						<h:selectOneMenu id="tipoC" value="#{pessoaMb.contatoTemp.tipo}" title="Selecione o tipo de contato" style="width:300px">
	                        <f:selectItem itemLabel="Email" itemValue="email"/>
	                        <f:selectItem itemLabel="Telefone" itemValue="telefone"/>
	                        <f:selectItem itemLabel="Outro" itemValue="outro"/>
	                 	</h:selectOneMenu>
	                	
	                	<h:outputLabel value="Descrição" for="descricaoC" />
	                	<h:inputText id="descricaoC" value="#{pessoaMb.contatoTemp.descricao}" title="Descrição do contato" size="100" />
		                	
					</h:panelGrid>
					<br/>
					<p:dataTable value="#{pessoaMb.pessoa.contatos}" var="us" style="width:100%" id="tbContato">
		    			<p:column>
		    				<f:facet name="header">Tipo</f:facet>
		    				<h:outputText value="#{us.tipo}" />
		    			</p:column>
		    			<p:column>
		    				<f:facet name="header">Descrição</f:facet>
		    				<h:outputText value="#{us.descricao}" />
		    			</p:column>
		    			<p:column>
		    				<f:facet name="header">Ação</f:facet>
		    				<center><h:commandLink action="#{pessoaMb.editarContato(us)}" value="" title="Editar dados deste registro">
		    					<h:graphicImage value="/css/img/edit.png" width="20px" height="20px" /></h:commandLink></center>
		    			</p:column>
		    		</p:dataTable>	
				</p:panel>
				</td></tr></table>	
		    </p:panel>
		    
		    <p:panel header="Lista de pessoas" style="width:100%; height: 95%; " rendered="#{pessoaMb.mostrarLista}">
		    	<table><tr><td width="1300px">
		    	<div style="padding-left: 10px">
			      	<nav class="navbar navbar-default" style="min-height: 30px !important;">
		  				<div class="container-fluid">
				      		<span class="btn-group navbar-right">
				      			<span class="btn-group">
									<h:commandLink styleClass="btn btn-link" action="#{pessoaMb.alternaMostraLista()}" value="Ver detalhe" />
								</span>				      			
				      		</span>
				      	</div>
				    </nav>	
				</div>    
		    	<p:dataTable value="#{pessoaMb.pessoas}" var="us" style="width:100%" id="tbPessoas">
		    			<p:column>
		    				<f:facet name="header">Nome</f:facet>
		    				<h:outputText value="#{us.nomecompleto}" />
		    			</p:column>
		    			<p:column>
		    				<f:facet name="header">CPF</f:facet>
		    				<h:outputText value="#{us.cpf}" />
		    			</p:column>
		    			<p:column>
		    				<f:facet name="header">Login</f:facet>
		    				<h:outputText value="#{us.login}" />
		    			</p:column>
		    			<p:column>
		    				<f:facet name="header">Email</f:facet>
		    				<h:outputText value="#{us.email}" />
		    			</p:column>
		    			<p:column>
		    				<f:facet name="header">Ação</f:facet>
				      		<center><h:commandLink action="#{pessoaMb.editar(us)}" value="" title="Editar dados deste registro">
				      			<h:graphicImage value="/css/img/edit.png" width="20px" height="20px" /></h:commandLink></center>
		    			</p:column>
		    	</p:dataTable>
		    	</td></tr></table>
		    </p:panel>
   
	    	
		</h:form>
    </ui:define>
    
    
</ui:composition>
