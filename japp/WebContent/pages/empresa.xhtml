<ui:composition template="../templates/t_base.xhtml"
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">

    <ui:define name="conteudo">
    	<h:form id="frmEmpresa">
	    	<p:panel header="Dados da empresa" style="width:99%; height: 95%; ">
		      	<table><tr><td width="90%">
		      	<div>
			      	<p:tabView>
			      		<p:tab title="Empresa">
			      	
					      	<h:panelGroup id="botoesPanel" layout="block">		      			
			      				<table><tr><td width="20px">
			      				<h:commandLink action="#{empresaMb.limpar()}" value="" ><h:graphicImage value="/css/img/limpar.png" width="20px" height="20px" /></h:commandLink>
			      				</td><td width="20px">
			      				<h:commandLink action="#{empresaMb.buscar()}" value="" ><h:graphicImage value="/css/img/buscar.png" width="20px" height="20px" /></h:commandLink>
			      				</td><td width="20px">
			      				<h:commandLink action="#{empresaMb.salvar()}" value="" ><h:graphicImage value="/css/img/salvar.png" width="20px" height="20px" /></h:commandLink>
			      				</td></tr></table>		      				
				      		</h:panelGroup>
					      	<h:panelGroup id="messagePanel" layout="block">
			                	<h:messages errorStyle="color: red" infoStyle="color: green" layout="table"/>
			                	<hr/>
				            </h:panelGroup>
					      	<h:panelGrid columns="4" styleClass="gridForm">
			                    <h:outputLabel value="id" for="id" />
			                    <h:inputText id="id" value="#{empresaMb.empresa.empresaId}" title="EmpresaTitle_id}" required="false" disabled="true"/>
			                    <h:panelGroup></h:panelGroup>
			                    <h:panelGroup></h:panelGroup>			                    
			                    
			                    <h:outputLabel value="Razão Social" for="razaoSocial" />
			                    <h:inputText id="razaoSocial" value="#{empresaMb.empresa.razaoSocial}" title="EmpresaTitle_razaoSocial}" required="false" size="70"/>
			                    
			                    <h:outputLabel value="Nome Fantasia" for="nomeFantasia" />
			                    <h:inputText id="nomeFantasia" value="#{empresaMb.empresa.nomeFantasia}" title="EmpresaTitle_nomeFantasia}" size="60"/>
			                    
			                    <h:outputLabel value="Cnpj" for="cnpj" />
			                    <h:inputText id="cnpj" value="#{empresaMb.empresa.cnpj}" title="Cnpj" size="50" styleClass="CNPJ"
			                    	onkeypress="mask(this,'99.999.999/9999-99',1,this)" />
			                    
			                    <h:outputLabel value="Inscricao Est." for="inscricaoEst" />
			                    <h:inputText id="inscricaoEst" value="#{empresaMb.empresa.inscricaoEst}" title="EmpresaTitle_inscricaoEst}" size="50" />
			                    
			                    <h:outputLabel value="Inscricao Mun." for="inscricaoMun" />
			                    <h:inputText id="inscricaoMun" value="#{empresaMb.empresa.inscricaoMun}" title="EmpresaTitle_inscricaoMun}" size="50" />
			                    
			                    <h:outputLabel value="Status" for="ativo" />
			                    <h:selectOneMenu value="#{empresaMb.empresa.ativo}" style="width:150px" id="ativo">
									<f:selectItem itemLabel="Ativo" itemValue="1"/>
									<f:selectItem itemLabel="Inativo" itemValue="0"/>
								</h:selectOneMenu>
			                    			                    
			                    <h:outputLabel value="Data Inclusao" for="datainclusao" />
			                    <h:outputLabel id="datainclusao" value="#{empresaMb.empresa.datainclusao}" >
			                        <f:convertDateTime pattern="dd/MM/yyyy" />
			                    </h:outputLabel>
			                    
			                    <h:outputLabel value="Data Alteracao" for="dataalteracao" />
			                    <h:outputLabel id="dataalteracao" value="#{empresaMb.empresa.dataalteracao}" >
			                        <f:convertDateTime pattern="dd/MM/yyyy" />
			                    </h:outputLabel>
								
			                    	
			                </h:panelGrid>
			                
			                <br/><br/><hr/>
			     		</p:tab>
			     		
			     		<p:tab title="Filiais">  
			     			
			     			<h:panelGroup id="botoesPanelFil" layout="block">		      			
			      				<table><tr><td width="20px">
			      				<h:commandLink action="#{empresaMb.limparFilial()}" value="" ><h:graphicImage value="/css/img/limpar.png" width="20px" height="20px" /></h:commandLink>
			      				</td><td width="20px">
			      				<h:commandLink action="#{empresaMb.buscarFilial()}" value="" ><h:graphicImage value="/css/img/buscar.png" width="20px" height="20px" /></h:commandLink>
			      				</td><td width="20px">
			      				<h:commandLink action="#{empresaMb.salvarFilial()}" value="" ><h:graphicImage value="/css/img/salvar.png" width="20px" height="20px" /></h:commandLink>
			      				</td></tr></table>		      				
				      		</h:panelGroup>
					      	<h:panelGroup id="messagePanelFil" layout="block">
			                	<h:messages errorStyle="color: red" infoStyle="color: green" layout="table"/>
			                	<hr/>
				            </h:panelGroup>
			     			
			     			<h:panelGrid columns="4" styleClass="gridForm">
			                    <h:outputLabel value="id" for="id" />
			                    <h:inputText id="idFil" value="#{empresaMb.filial.empresaId}" title="EmpresaTitle_id}" required="false" />
			                    <h:panelGroup></h:panelGroup>
			                    <h:panelGroup></h:panelGroup>
			                    
			                    <h:outputLabel value="Razão Social" for="razaoSocial" />
			                    <h:inputText id="razaoSocialFil" value="#{empresaMb.filial.razaoSocial}" title="EmpresaTitle_razaoSocial}" required="false" size="70"/>
			                    
			                    <h:outputLabel value="Nome Fantasia" for="nomeFantasia" />
			                    <h:inputText id="nomeFantasiaFil" value="#{empresaMb.filial.nomeFantasia}" title="EmpresaTitle_nomeFantasia}" size="60"/>
			                    
			                    <h:outputLabel value="Cnpj" for="cnpj" />
			                    <h:inputText id="cnpjFil" value="#{empresaMb.filial.cnpj}" title="EmpresaTitle_cnpj}" size="50" styleClass="CNPJ"
			                    	onkeypress="mask(this,'99.999.999/9999-99',1,this)" />
			                    
			                    <h:outputLabel value="Inscricao Est." for="inscricaoEst" />
			                    <h:inputText id="inscricaoEstFil" value="#{empresaMb.filial.inscricaoEst}" title="EmpresaTitle_inscricaoEst}" size="50" />
			                    
			                    <h:outputLabel value="Inscricao Mun." for="inscricaoMun" />
			                    <h:inputText id="inscricaoMunFil" value="#{empresaMb.filial.inscricaoMun}" title="EmpresaTitle_inscricaoMun}" size="50" />
			                    
			                    <h:outputLabel value="Status" for="ativo" />
			                    <h:selectOneMenu value="#{empresaMb.filial.ativo}" style="width:150px">
									<f:selectItem itemLabel="Ativo" itemValue="1"/>
									<f:selectItem itemLabel="Inativo" itemValue="0"/>
								</h:selectOneMenu>
			                    			                    
			                    <h:outputLabel value="Data Inclusao" for="datainclusao" />
			                    <h:outputLabel id="datainclusaoFil" value="#{empresaMb.filial.datainclusao}" >
			                        <f:convertDateTime pattern="dd/MM/yyyy" />
			                    </h:outputLabel>
			                    
			                    <h:outputLabel value="Data Alteracao" for="dataalteracao" />
			                    <h:outputLabel id="dataalteracaoFil" value="#{empresaMb.filial.dataalteracao}" >
			                        <f:convertDateTime pattern="dd/MM/yyyy" />
			                    </h:outputLabel>
												      
			                </h:panelGrid>
			                <br/>
							<p:dataTable value="#{empresaMb.listFiliais}" var="us" style="width:100%" id="tbFiliais">
				    			<p:column width="10%">
				    				<f:facet name="header">id</f:facet>
				    				<h:outputText value="#{us.id}" />
				    			</p:column>
				    			<p:column>
				    				<f:facet name="header">Nome Fantasia</f:facet>
				    				<h:outputText value="#{us.nomeFantasia}" />
				    			</p:column>
				    			<p:column>
				    				<f:facet name="header">CNPJ</f:facet>
				    				<h:outputText value="#{us.cnpj}" />
				    			</p:column>
				    			<p:column width="20%">
				    				<f:facet name="header">Ação</f:facet>
				    				<center><h:commandLink action="#{empresaMb.editarFilial(us)}" value="" title="Editar dados deste registro"><h:graphicImage value="/css/img/edit.png" width="20px" height="20px" /></h:commandLink></center>
				    			</p:column>
				    		</p:dataTable> 
			                <br/><br/><hr/>
			     		</p:tab> 
			     	</p:tabView>	        
					
				</div>	
				</td></tr></table>
		    </p:panel>
		</h:form>
    </ui:define>
    
</ui:composition>


    
